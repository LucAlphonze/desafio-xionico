import{a as E,c as M,d as y,e as r,f as C}from"./chunk-5CZLT6VD.js";import{a}from"./chunk-OU2I6HUL.js";import{a as g,b}from"./chunk-QCV3A64O.js";import"./chunk-AYCSQOK4.js";import{$b as d,Kb as m,Lb as l,Mb as c,ac as h,bc as f,db as s,ka as p,kc as u}from"./chunk-E6UKO3SR.js";import{e as _}from"./chunk-5G567QLT.js";var v=_(E());var V=["map"],w=(()=>{class n{constructor(e){this.http=e,this.latitudInicial=-31.4201,this.longitudInicial=-64.1888,this.zoomInicial=14,this.reporteVentasUrl=a.URL_REPORTE_VENTAS,this.apiKeyMaptiler=a.MAPTILER_API_KEY}ngOnInit(){y.apiKey=this.apiKeyMaptiler}ngAfterViewInit(){let e={lng:-64.1888,lat:-31.4201,zoom:10};this.map=new C({container:this.mapContainer.nativeElement,style:M.STREETS,center:[e.lng,e.lat],zoom:e.zoom}),this.marker=new r({color:"#FF0000",draggable:!0}).setLngLat([-64.1888,-31.4201]).addTo(this.map),this.http.get(`${this.reporteVentasUrl}?fecha_desde=2025-01-01&fecha_hasta=2025-02-12&empresa=1&page_size=50`).subscribe(i=>{i.results.forEach(t=>{t.ventas_detalle.forEach(o=>{let I=new r({color:"#FF0000"}).setLngLat([t.long,t.lat]).setPopup(new v.Popup().setHTML(` <div style="background-color: #f0f0f0; color: #333; padding: 10px;">                   
                            <b>Cliente:</b> ${t.cliente}<br>
                            <b>Vendedor:</b> ${t.vendedor}<br>
                            <b>Importe:</b> ${t.importe}<br>
                            <b>Producto:</b> ${o.producto}<br>
                            <b>Cantidad:</b> ${o.cantidad}
                                </div>
                        `)).addTo(this.map)})})})}static{this.\u0275fac=function(i){return new(i||n)(s(g))}}static{this.\u0275cmp=p({type:n,selectors:[["app-mapa-ventas"]],viewQuery:function(i,t){if(i&1&&d(V,5),i&2){let o;h(o=f())&&(t.mapContainer=o.first)}},standalone:!0,features:[u],decls:3,vars:0,consts:[["map",""],[1,"map-wrap"],[1,"map"]],template:function(i,t){i&1&&(m(0,"div",1),c(1,"div",2,0),l())},dependencies:[b],styles:[".map-wrap[_ngcontent-%COMP%]{position:relative;width:100%;height:calc(100vh - 77px)}.map[_ngcontent-%COMP%]{position:absolute;width:100%;height:95%}"]})}}return n})();var x=[{path:"",component:w,data:{title:"Mapas"}}];export{x as routes};
